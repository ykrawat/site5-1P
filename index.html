<!DOCTYPE html>
<html>
<head>
    <title>Fixed Pixel Test</title>
    <!-- jQuery Library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Signals Gateway Pixel + Meta Pixel Code -->
    <script>
      function assign(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s)for(var k in s)if(Object.prototype.hasOwnProperty.call(s,k))t[k]=s[k]}return t;}
      !(function(f,b,e,v,vv,n,nn,t,s,tt,ss){
        if (!f.cbq){nn = f.cbq = function(){nn.initialized ? nn.apply(f.cbq, arguments) : nn.queue.push(arguments);};
        if(!f._cbq) f._cbq = nn;
        nn.push = nn; nn.loaded = !0; nn.version = '2.0'; nn.queue = [];
        tt = b.createElement(e); tt.async = !0; tt.src = vv; ss=b.getElementsByTagName(e)[0]; ss.parentNode.insertBefore(tt,ss);}
        if (f.xbq) return; if (f.fbq) f.xbq=f.fbq;
        n = f.fbq = function()
        { var args = Array.prototype.slice.call(arguments);
          var m = args[0]; var isT = m === 'track' || m === 'trackCustom'; var isS = m === 'trackSingle' || m === 'trackSingleCustom';
          var mId = args[isT?1:2] + "." + Date.now() + Math.random().toString(36);
          if (isT && args.length < 4)
            arguments = args.concat((args.length < 3 ? [{}, { eventID: mId }] : [{ eventID: mId }]));
          else if (isS && arguments.length < 5)
            arguments = args.concat((args.length < 4 ? [{}, { eventID: mId }] : [{ eventID: mId }]));
          if (isT && (!arguments[3] || !arguments[3].eventID)) arguments[3] = assign({}, arguments[3] || {}, { eventID: mId });
          if (isS && (!arguments[4] || !arguments[4].eventID)) arguments[4] = assign({}, arguments[4] || {}, { eventID: mId });
          n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);
          if (typeof m === 'string' && m.indexOf('track') === 0) {
            if (isS) arguments[1] = f.fbq.instance.pixelsByID[arguments[1]].cId;
            if (arguments[1]) (f.cbq.initialized ? f.cbq.apply(f.cbq, arguments) : f.cbq.queue.push(arguments));}
        }
        if(!f._fbq) f._fbq = n;
        n.push = n; n.loaded = !0; n.version = '2.0'; n.queue = (f.xbq)?f.xbq.queue:[];
        t = b.createElement(e); t.async = !0; t.src = v;s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);
      })
      (window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js', 'https://static.5ustctfrv.sgqa1.cbinternal.com/sdk/7595809950397772624/events.js');
      fbq('init', '1515510163042838');fbq('track', 'PageView');
      cbq('setHost', 'https://uyfuti.sgqa1.cbinternal.com/');
    cbq('init', '7595809950397772624');
      fbq('set', 'cId', '7595809950397772624', '1515510163042838');
      cbq('set', 'integrationMethod', 'forkFromSnippetCode');
    </script>
  <!-- End Signals Gateway Pixel + Meta Pixel Code -->
    
</head>
<body>
    <h1>Pixel Event Test Page</h1>
    <p>The following are Meta button tests:</p>
    
    <button id="addToCartButton">Add to cart</button>
    <button id="addToCartButtonCustom">Add to cart Custom</button>
    <button id="addToCartButtonSingle">Add to cart Single</button>
    <button id="addToCartButtonSingleCustom">Add to cart Single Custom</button>

    <!-- Event handlers at bottom of body -->
    <script type="text/javascript">
      $(document).ready(function() {
        console.log('jQuery loaded and DOM ready');
        
        $('#addToCartButton').click(function() {
          console.log('AddToCart button clicked');
          try {
            fbq('track', 'AddToCart');
            fbq('track', 'AddToCart', {currency: "USD", value: 20.00});
            fbq('track', 'AddToCart', {currency: "USD", value: 20.10}, {eventID:"track.0930"});
            console.log('AddToCart events sent');
          } catch(e) {
            console.error('Error sending AddToCart events:', e);
          }
        });

        $('#addToCartButtonCustom').click(function() {
          console.log('AddToCartCustom button clicked');
          try {
            fbq('trackCustom', 'AddToCartCustom');
            fbq('trackCustom', 'AddToCartCustom', {currency: "USD", value: 21.00});
            fbq('trackCustom', 'AddToCartCustom', {currency: "USD", value: 21.10}, {eventID:"trackCustom.0930"});
            console.log('AddToCartCustom events sent');
          } catch(e) {
            console.error('Error sending AddToCartCustom events:', e);
          }
        });

        $('#addToCartButtonSingle').click(function() {
          console.log('AddToCartSingle button clicked');
          try {
            fbq('trackSingle', '45202414779652', 'AddToCartSingle');
            fbq('trackSingle', '45202414779652', 'AddToCartSingle', {currency: "USD", value: 22.00});
            fbq('trackSingle', '45202414779652', 'AddToCartSingle', {currency: "USD", value: 22.10}, {eventID:"trackSingle.0930"});
            console.log('AddToCartSingle events sent');
          } catch(e) {
            console.error('Error sending AddToCartSingle events:', e);
          }
        });

        $('#addToCartButtonSingleCustom').click(function() {
          console.log('AddToCartSingleCustom button clicked');
          try {
            fbq('trackSingleCustom', '45202414779652', 'AddToCartSingleCustom');
            fbq('trackSingleCustom', '45202414779652', 'AddToCartSingleCustom', {currency: "USD", value: 23.00});
            fbq('trackSingleCustom', '45202414779652', 'AddToCartSingleCustom', {currency: "USD", value: 23.10}, {eventID:"AddToCartSingleCustom.0930"});
            console.log('AddToCartSingleCustom events sent');
          } catch(e) {
            console.error('Error sending AddToCartSingleCustom events:', e);
          }
        });
      });
    </script>

    <!-- Debug Script -->
    <script>
      // Debug function to check pixel status
      function checkPixelStatus() {
        console.log('Meta Pixel (fbq) available:', typeof fbq !== 'undefined');
        console.log('Cloudbridge Pixel (cbq) available:', typeof cbq !== 'undefined');
        console.log('jQuery available:', typeof $ !== 'undefined');
        
        // Check if pixels are initialized
        if (typeof fbq !== 'undefined') {
          console.log('fbq queue length:', fbq.queue ? fbq.queue.length : 'N/A');
        }
        if (typeof cbq !== 'undefined') {
          console.log('cbq queue length:', cbq.queue ? cbq.queue.length : 'N/A');
        }
      }
      
      // Run debug check after page loads
      setTimeout(checkPixelStatus, 2000);
    </script>
</body>
</html>



